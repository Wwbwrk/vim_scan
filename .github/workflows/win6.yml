name: test windows
on: workflow_dispatch
#  schedule:
#    - cron: '42 0 * * *'  # Run once per day, to avoid Coverity's submission limits

#permissions:
#  contents: read # to fetch code (actions/checkout)

jobs:
  scan:
    runs-on: windows-latest

    env:
      CC: gcc
      DEBIAN_FRONTEND: noninteractive
      TOKEN: ${{ secrets.COVERITY_SCAN_TOKEN }}

    steps:
      - name: Checkout repository from github
        if: env.TOKEN
        uses: actions/checkout@v4
#        with:
#          ref: v9.1.0000
      - run: |
          echo "after tag ref"

      - name: end script
        shell: pwsh
        run: |
          echo $PSversiontable
          cd ($env:GITHUB_WORKSPACE + "\.github\workflows")
          pwd
          get-childitem 
          cat .\msvc.ps1
          .\msvc.ps1
          cd "..\..\"

      - name: out file
        shell: pwsh
        run: |
          echo $env:GITHUB_WORKSPACE
          cd $env:GITHUB_WORKSPACE
          dir env: | out-file scan\out.txt -encoding ASCII
          cat scan\out.txt 
